
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sticker-online</title>
    <link rel="stylesheet" href="index.css">
</head>
<div id="content">
    <div id="parent">
    </div>
      </div>
<div id="stickers_content">

    <div id="sticker-content"></div>
</div>
<script src="https://unpkg.com/better-scroll@latest/dist/better-scroll.min.js"></script>
    <script>
    // let bs =
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.25.0/axios.min.js" integrity="sha512-/Q6t3CASm04EliI1QyIDAA/nDo9R8FQ/BULoUFyN4n/BDdyIxeH7u++Z+eobdmr11gG5D/6nPFyDlnisDwhpYA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        /* first to update thumb and collect file_id */
    const stickers_name = [
        `AmashiroNatsukiEars_NoWord`,
        `usaginono`,
        `qaq00121`,
        `sticker610026703_1_by_luxiaoxun_bot`,
        `Kaguya_Image_by_luxiaoxun_bot`,
        `DSickerMiao_by_luxiaoxun_bot`,
        `gawrguraa`,
        `GawrGuraShark`,
    ];
    let stickers_content_bsScroll = null;

    </script>
    <script>
       async function getFIlePath(file_id){
            const data =  await axios({
               method:"GET",
               url:`https://api.telegram.org/bot1842770519:AAEJ9hd3SKdq6UO2WztpKNxoDYTEELerpo0/getFile?file_id=${file_id}`
             });
            return data.data.result['file_path'];
        }
        function getFileLink(file_path){
            return `https://api.telegram.org/file/bot1842770519:AAEJ9hd3SKdq6UO2WztpKNxoDYTEELerpo0/${file_path}`
        }
    async function loadStickersContent(sticker_index){
     
        let stickers_html_template= "";
        const stcikers_data = [];
        const stickers_promise = [];
        const getStickersData = await axios({
      method:"GET",
      url:"https://api.telegram.org/bot1842770519:AAEJ9hd3SKdq6UO2WztpKNxoDYTEELerpo0/getStickerSet?name="+stickers_name[sticker_index],
    });
        for(let i of getStickersData.data.result.stickers){
            stickers_promise.push(new Promise(resolve=>{
             axios({
               method:"GET",
               url:`https://api.telegram.org/bot1842770519:AAEJ9hd3SKdq6UO2WztpKNxoDYTEELerpo0/getFile?file_id=${i['file_id']}`
             }).then(res=>{
                stcikers_data.push(res.data.result['file_path']);
            console.log("added");
            resolve();
             })
            }))
         
        };
        Promise.all(stickers_promise).then(res=>{
            stcikers_data.forEach(v=>{
          stickers_html_template +=`
          <div>
              <img src="https://api.telegram.org/file/bot1842770519:AAEJ9hd3SKdq6UO2WztpKNxoDYTEELerpo0/${v}" />  
          </div>
          `
        });
        const isFirst = document.querySelector("#sticker-content").innerHTML;
        document.querySelector("#sticker-content").innerHTML = stickers_html_template ;
        if(!isFirst){
            stickers_content_bsScroll = BetterScroll.createBScroll(document.getElementById("stickers_content"),{
        probeType:3,
        movable:true,
        scrollY:true,
        scrollbar: true,
        mouseWheel: true,
        minSize :1,
             });

        };
        if(stickers_content_bsScroll){
            stickers_content_bsScroll.scrollTo(0,0);
            stickers_content_bsScroll.refresh();
        }

        console.log(stcikers_data)
        })
    }
    </script>
    <script>
        (async ()=>{
        let sticker_thumb_html = ``;
        for(let i of stickers_name){
            const getStickerData = await axios({
                    method:"GET",
                    url:"https://api.telegram.org/bot1842770519:AAEJ9hd3SKdq6UO2WztpKNxoDYTEELerpo0/getStickerSet?name="+i,
            });
            const file_path = await getFIlePath(
                getStickerData.data.result.thumb ? getStickerData.data.result.thumb.file_id : getStickerData.data.result.stickers[0].file_id
            );
            sticker_thumb_html +=`
            <div><img src="${getFileLink(file_path)}" /></div>
            `
        }
        document.getElementById("parent").innerHTML = sticker_thumb_html;
        BetterScroll.createBScroll(document.getElementById("content"), {
            probeType: 3,
            movable: true,
            scrollX: true,
            pullUpLoad: true,
            minSize :1,
            scrollbar: true,  mouseWheel: true,click:true,
    });
    let debounce_timer = setTimeout(()=>{},0);
    document.querySelectorAll("#parent >div").forEach((v,k)=>v.addEventListener("click",function(){
        clearTimeout(debounce_timer);
        debounce_timer = setTimeout(() => {
            loadStickersContent(k)
        }, 1234);
        }));        
}
        
        )();
       
    </script>
    <script>
     

    </script>
